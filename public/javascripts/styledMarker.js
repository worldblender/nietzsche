var StyledIconTypes={},StyledMarker,StyledIcon;
(function(){var g=google.maps,o=g.Point,p=g.event,q=g.MarkerImage;StyledMarker=function(a){var b=this.styleIcon=a.styleIcon;this.bindTo("icon",b);this.bindTo("shadow",b);this.bindTo("shape",b);this.setOptions(a)};StyledMarker.prototype=new g.Marker;StyledIcon=function(a,b,c){function h(){var e=document.createElement("img"),i=document.createElement("img");p.addDomListenerOnce(i,"load",function(){var j=i.width,k=i.height;d.set(l,new q(a.getShadowURL(d),null,null,a.getShadowAnchor(d,j,k)));simage=null});
p.addDomListenerOnce(e,"load",function(){var j=e.width,k=e.height;d.set(m,new q(a.getURL(d),null,null,a.getAnchor(d,j,k)));d.set(r,a.getShape(d,j,k));e=null});e.src=a.getURL(d);i.src=a.getShadowURL(d)}var f,d=this,m="icon",l="shadow",r="shape",n=[];d.as_=function(e){n.push(e);for(f in b)e.set(f,b[f])};if(a!==StyledIconTypes.CLASS){for(f in a.defaults)d.set(f,a.defaults[f]);d.setValues(b);d.set(m,a.getURL(d));d.set(l,a.getShadowURL(d));c&&c.as_(d);h();d.changed=function(e){e!==m&&e!==r&&e!==l&&h()}}else{d.setValues(b);
d.changed=function(e){b[e]=d.get(e);for(f=0;f<n.length;f++)n[f].set(e,d.get(e))};c&&c.as_(d)}};StyledIcon.prototype=new g.MVCObject;StyledIconTypes.CLASS={};StyledIconTypes.MARKER={defaults:{text:"",color:"dddddd",fore:"000000",starcolor:null},getURL:function(a){var b=a.get("starcolor"),c=a.get("text"),h=a.get("color").replace(/#/,""),f=a.get("fore").replace(/#/,"");a=b?"http://chart.apis.google.com/chart?chst=d_map_xpin_letter&chld=pin_star|":"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=";
if(c)c=c.substr(0,2);a+=c+"|";a+=h+"|";a+=f;if(b)a+="|"+b.replace(/#/,"");return a},getShadowURL:function(a){return a.get("starcolor")?"http://chart.apis.google.com/chart?chst=d_map_xpin_shadow&chld=pin_star":"http://chart.apis.google.com/chart?chst=d_map_pin_shadow"},getAnchor:function(a,b,c){return new o(b/2,c)},getShadowAnchor:function(a,b,c){return new o(b/4,c)},getShape:function(a,b,c){a={};a.coord=[b/2,c,0.4375*b,0.625*c,0.3125*b,0.4375*c,0.21875*b,0.3125*c,0.3125*b,0.125*c,0.5*b,0,0.6875*b,
0.125*c,0.78125*b,0.3125*c,0.6875*b,0.4375*c,0.5625*b,0.625*c];for(b=0;b<a.coord.length;b++)a.coord[b]=Math.round(a.coord[b]);a.type="poly";return a}};StyledIconTypes.BUBBLE={defaults:{text:"",color:"ffffff",fore:"000000"},getURL:function(a){var b="http://chart.apis.google.com/chart?chst=d_bubble_text_small&chld=bb|";b+=a.get("text")+"|";b+=a.get("color").replace(/#/,"")+"|";b+=a.get("fore").replace(/#/,"");return b},getShadowURL:function(a){return"http://chart.apis.google.com/chart?chst=d_bubble_text_small_shadow&chld=bb|"+
a.get("text")},getAnchor:function(){return new google.maps.Point(0,42)},getShadowAnchor:function(){return new google.maps.Point(0,44)},getShape:function(a,b){var c={};c.coord=[0,44,13,26,13,6,17,1,b-4,1,b,6,b,21,b-4,26,21,26];c.type="poly";return c}}})();
